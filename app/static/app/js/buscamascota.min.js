function initMap(e){let t;return t=L.map(e,{scrollWheelZoom:!0,fullscreenControl:!0,fullscreenControl:{pseudoFullscreen:!1},minZoom:2}).setView([-23.3165935,-58.1693445],6),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(t),t}function addMarkers(e,t,n){for(i=0;i<e.length;i++){lat=e[i].latitude,lon=e[i].longitude;let t=L.marker([lat,lon]);t.bindPopup(generateInfoWindowContent(e[i]),{minWidth:200}).openPopup(),n.addLayer(t)}t.addLayer(n)}function generateInfoWindowContent(e){let t="";return t="<p class='text-center text-uppercase h4' style='color: red;'>"+e.report_type+"</p>",t+="<div class='text-center'>",t+="<img src='"+e.picture+"' alt='mascota perdida' style= 'max-width: 300px; max-height:200px;'>",t+="</div>",null!=e.phone&&(t+="<p class='text-center h6'> Contacto: "+e.phone+"</p>"),null!=e.city?t+="<p class='text-center h6'>"+e.city+","+e.country+"</p>":t+="<p class='text-center h6'>"+e.country+"</p>",t+='<p class=\'text-center\'> <a class="btn btn-warning mt-1 amarillo" href="https://buscamascota.org/reporte/'+e.id+'"> Ver reporte completo </a>  </p>'}function completeUbicationWidgets(e,t){let n,d=new XMLHttpRequest,o="https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat="+e+"&lon="+t;d.onreadystatechange=function(){if(4==this.readyState&&200==this.status){n=d.responseText;let e=JSON.parse(n);e.display_name?(document.getElementById("id_ubication_resume").value=e.display_name,e.address.country&&(document.getElementById("id_country").value=e.address.country),e.address.postcode&&(document.getElementById("id_postal_code").value=e.address.postcode),e.address.city&&(document.getElementById("id_city").value=e.address.city),e.address.road&&(document.getElementById("id_address").value=e.address.road)):(document.getElementById("id_ubication_resume").value="",document.getElementById("id_country").value="",document.getElementById("id_postal_code").value="",document.getElementById("id_city").value="",document.getElementById("id_address").value="")}},d.open("GET",o,!0),d.send()}function enableSubmit(){document.getElementById("id_accept_terms").checked?document.getElementById("submitButton").disabled=!1:document.getElementById("submitButton").disabled=!0}function changeView(){document.getElementById("viewMap").checked?(document.getElementById("divMapView").style.display="block",document.getElementById("divListView").style.display="none",document.cookie="view=map"):(document.getElementById("divMapView").style.display="none",document.getElementById("divListView").style.display="block",document.cookie="view=list")}function readCookie(){let e=document.cookie.split(";");for(i=0;i<e.length;i++)return e[i].includes("view=list")?void(document.getElementById("viewList").checked=!0):void(document.getElementById("viewMap").checked=!0);document.getElementById("viewMap").checked=!0}function mapMoves(e,t,n){let d=e.getBounds(),o=[];for(n.clearLayers(),i=0;i<t.length;i++)t[i].latitude<=d._northEast.lat&&t[i].latitude>=d._southWest.lat&&t[i].longitude<=d._northEast.lng&&t[i].longitude>=d._southWest.lng&&o.push(t[i]);addMarkers(o,e,n)}